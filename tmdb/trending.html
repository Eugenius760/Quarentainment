<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trending</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>

    <div id="movie-view"></div>
    <script>
        var trendURL = "https://api.themoviedb.org/3/trending/movie/day?api_key=660bf8330423e5658590b1cdb677dc08"
        // var apiKey = "660bf8330423e5658590b1cdb677dc08";
        
        var genreDiction = {
            28:"Action",
            12:"Adventure",
            16:"Animation",
            35:"Comedy",
            80:"Crime",
            99:"Documentary",
            18:"Drama",
            10751:"Family",
            14:"Fantasy",
            36:"History",
            27:"Horror",
            10402:"Music",
            10749:"Romance",
            878:"Science Fiction",
            10770:"TV Movie",
            53:"Thriller",
            10752:"War",
            37:"Western",
        };
        $.ajax({
            url: trendURL,
            method: "GET"
        }).then(function (response) {
            console.log(response)

            for (var i = 0; i < response.results.length; i++) {
                
                var myGenreids = response.results[i].genre_ids;
                var anyString = ""
                for (var j = 0; j < myGenreids.length; j++) {
                    console.log(genreDiction[myGenreids[j]])
                    // anyString.concat(genreDiction)
                    // anyString + "," + genreDiction[myGenreids[j]]
                    anyString = anyString + ", " + genreDiction[myGenreids[j]]
                 
                }
                var resString = anyString.substring(2,);
                console.log(resString);
                console.log(response.results[i].genre_ids);
                var moTrend = $("<p>").html(
                    response.results[i].title + "<br/><img src= 'https://image.tmdb.org/t/p/w200" +
                    response.results[i].poster_path + "'><br/>" +
                    response.results[i].vote_average + "<br/>" +
                    resString + "<br/>" +
                    response.results[i].overview + "<br/>"
                );
                $("#movie-view").append(moTrend)

            }
        });
    </script>

</body>

</html>